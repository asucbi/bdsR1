---
title: '&#32;'
output:
  html_document
---

```{r, include=F, dependson="setup.R"}
## Exam 1 specific

library(tidyverse)
library(nycflights13)

set.seed(42)

flights <- flights %>% 
  slice_sample(prop=.35)
```


The nycflights13 package contains information about all flights that departed from NYC (e.g. EWR, JFK and LGA) in 2013. The main data is in the `flights` data frame, but there are additional data sets which may help understand what causes delays, specifically:

- `weather`: hourly meteorological data for each airport
- `planes`: construction information about each plane
- `airports`: airport names and locations
- `airlines`: translation between two letter carrier codes and names

Based on what you know about the datasets, joining, and your ggplot-ing experience, which code would produce the following plot?

```{r, echo=F, message=F}
flights %>%
  left_join(airlines) %>%
  group_by(carrier) %>%
  filter(n() > 500, arr_delay < 180) %>%
  ggplot(aes(x=arr_delay)) +
  geom_histogram() +
  geom_vline(xintercept = 0) +
  facet_wrap(~name, scales="free_y")
```


A)
```
flights %>%
  group_by(carrier) %>%
  filter(n() > 500, arr_delay < 180) %>%
  ggplot(aes(x=arr_delay)) +
  geom_histogram() +
  facet_wrap(~name, scales="free_y")
```
B)
```
flights %>%
  left_join(airlines) %>%
  group_by(carrier) %>%
  ggplot(aes(x=arr_delay)) +
  geom_histogram() +
  geom_vline(xintercept = 0) +
  facet_wrap(~name)
```
C)
```
flights %>%
  filter(n() > 1000, arr_delay > 180) %>%
  ggplot(aes(x = arr_delay)) +
  geom_histogram() +
  geom_vline(xintercept = 0) +
  facet_wrap(~airlines, scales="free_y")
```
D)
```
flights %>%
  left_join(airlines) %>%
  group_by(carrier) %>%
  filter(n() > 500, arr_delay < 180) %>%
  ggplot(aes(x=arr_delay)) +
  geom_histogram() +
  geom_vline(xintercept = 0) +
  facet_wrap(~name, scales="free_y")
```
